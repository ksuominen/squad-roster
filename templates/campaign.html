{% extends "layout.html" %}

{% block title %}{{ campaign.name }}{% endblock %}
{% block content %}
  <h2>{{ campaign.name }}</h2>
  <p>
    <ul>
      <li>Description: {{ campaign.name }}</li>
      <li>Gamemaster: {{ campaign.username }}</li>
    </ul>
  </p>

  <h3>Characters in this campaign:</h3>
  {% if characters %}
    <ul>
      {% for character in characters %}
      <li><a href="/character/{{character.id}}">{{ character.name }}</a>, a level {{ character.level }} {{ character.class_name }}</li>
      {% endfor %}
    </ul>
    {% else %}
      <p>This campaign currently has no characters.</p>
    {% endif %}

  {% if session.get("user_name") == campaign.username %}
    <p>
      <p>Add a new character to this campaign:</p>
      {% from "_formhelpers.html" import render_field %}
      <form action="/campaign/{{campaign.id}}" method="POST">
        <dl>
          {{ render_field(form.character_id) }}
        </dl>
	      <input type="submit" value="Add character">
        <input type="hidden" name="csrf_token" value = "{{ csrf_token() }}" />
	    </form>
    </p>
  {% endif %}
{% endblock %}